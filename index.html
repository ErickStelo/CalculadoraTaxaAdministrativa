<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Calculo de Porcentagem de Adm</title>
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
	<script type="text/javascript"src="jQuery-Mask-Plugin-master/dist/jquery.mask.js"></script>
	<script type="text/javascript" src="jQuery-Mask-Plugin-master/dist/jquery.mask.min.js"></script>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-152050620-2"></script>
</head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-152050620-2');
</script>
<script type="text/javascript">
	$(document).ready(function(){
		$('.money').mask('000000000000000.00', {reverse: true});

		$(".btncalc").click(function(){
			$("#entradas").removeClass("hide");
			var tipocalculo = $(this).attr("tipocalc");
			if (tipocalculo == 1){
				console.log("Selecionado o tipo de calulo 1");
				$("#entradas").fadeIn("fast");
				$(".vldinamico").html("Valor Repasse");
				$("#calcula").attr("tipocalc", 1);


			} else if(tipocalculo ==2){
				console.log("Selecionado o tipo de calulo 2");
				$("#entradas").fadeIn("fast");
				$(".vldinamico").html("Valor de Taxa");
				$("#calcula").attr("tipocalc", 2);
			}
		});

		$("#limpar").click(function(){
			$("#vltaxaadm").text("");
			$("#vlaluguel").val("");
			$("#vlrepasse_taxa").val("");
			$("#vlrepassereal").text("");
			$("#vladmimob").text("");
			$("#resultados").fadeOut("fast");
			$("#entradas").fadeOut("fast");

		});

		$("#calcula").click(function(){
			var log = "";
			if($("#vlaluguel").val()==""||$("#vlrepasse_taxa").val()==""||$("#vlaluguel").val()==0.00||$("#vlrepasse_taxa").val()==0.00){
				alert("Campos obrigatórios vazios ou com valor incorreto, verifique e tente novamente;");
			}else{
				if($("#calcula").attr("tipocalc")==1){
					var aluguel = parseFloat($("#vlaluguel").val());
					var repasse = parseFloat($("#vlrepasse_taxa").val());
					var vlcomissao = ((repasse*100)/aluguel).toFixed(3);
					var vltaxaadm = (100-vlcomissao).toFixed(3);
					var vlrepassereal = (aluguel-(aluguel*vltaxaadm/100)).toFixed(3);
					var vladmimob = ((aluguel*vltaxaadm)/100).toFixed(3);
					$("#entradas").removeClass("hide");
					$("#resultados").fadeIn("fast");
					$("#vltaxaadm").text(vltaxaadm+" %");
					$("#vlrepassereal").text("R$ "+vlrepassereal);
					$("#vladmimob").text("R$ "+vladmimob);
					log += "Calculo Comissão:("+repasse+"*100)/"+aluguel+" = "+ vlcomissao + " | ";
					log += "Calculo % Taxa: 100-"+vlcomissao+" = "+vltaxaadm;
					console.log(log);
				}else if($("#calcula").attr("tipocalc")==2){
					var aluguel = parseFloat($("#vlaluguel").val());
					var taxa = parseFloat($("#vlrepasse_taxa").val());
					var aux = taxa*100;
					var vlporcadm = aux/aluguel;
					var vlrepassereal = (aluguel-taxa).toFixed(3);

					$("#resultados").fadeIn("fast");
					$("#vltaxaadm").text(vlporcadm+" %");
					$("#vlrepassereal").text("R$ "+vlrepassereal);
					$("#vladmimob").text("R$ "+taxa);
					log += "Calculo % ADM:("+taxa+"*100)/"+aluguel+" = "+ vlporcadm;
					console.log(log);
				}
			}
		});
	});

</script>
<style type="text/css">
	body {
		background-color: #dee2e6;
		margin: 20px 10px;
	}

	.hide{
		display: none;
	}

	main {
		background: white;
		margin: 20px 10px;
		padding: 10px;
	}

	.box {
		width: 600px;
		padding: 20px;
		background: white;
		box-shadow: 0px 8px 7px 0px #a7a7a7;
	}
</style>
<body>
	<div class="container box">
		<h4 class="text-center">Calculadora de Taxa de ADM</h4>
		<hr>
		<div id>
			<p class="text-center">Selecione o tipo de calculo:</p>
			<div class="row">
				<div class="col"><button class="btn btn-dark btncalc" tipocalc="1" >Usando o valor de aluguel e valor de repasse ao proprietário</button></div>
				<div class="col"><button class="btn btn-dark btncalc" tipocalc="2" >Usando o valor de aluguel e valor de taxa de adm</button></div>
			</div>
		</div>
		<br>
		<div class="container hide" id="entradas">
			<div class="row">
				<div class="col-5">
					<p class="text-right">Valor de aluguel*</p>
				</div>
				<div class="col text-left">
					<input type="text" class="form money" name="vlaluguel" id="vlaluguel">
				</div>
			</div>
			<div class="row">
				<div class="col-5">
					<p class="text-right vldinamico">Valor de repasse*</p>
				</div>
				<div class="col text-left">
					<input type="text" class="money" name="vlrepasse_taxa" id="vlrepasse_taxa">
				</div>
			</div>
			<div class="row">
				<div class="col">
					<button class="btn btn-primary btn-lm btn-block" tipocalc="" id="calcula">Calcular</button>
				</div>
				<div class="col">
					<button class="btn btn-secondary btn-lm btn-block" id="limpar">Limpar</button>
				</div>
			</div>

			<div class="container hide" id="resultados">
				<hr>
				<div class="row">
					<div class="col">
						<p class="font-weight-bold text-right">% Taxa Aproximada</p>
					</div>
					<div class="col">
						<h4 id="vltaxaadm"></h4>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<p class="font-weight-bold text-right">Valor de Repasse(Prova Real)</p>
					</div>
					<div class="col">
						<h4 id="vlrepassereal"></h4>
					</div>
				</div>
				<div class="row">
					<div class="col">
						<p class="font-weight-bold text-right">Valor ADM Imob</p>
					</div>
					<div class="col">
						<h4 id="vladmimob"></h4>
					</div>
				</div>
			</div>
		</div>
		<hr>
		<div class="container" style="height: 30px">
			<img class="text-center" src="Imoalert_esc_dour.png" style="width: 150px; display: block; margin: 40px auto;">
		</div>
		<div class="container text-center">
			<p class="font-weight-light">Versão 1.2.0</p>
		</div>
	</div>
</body>
</html>